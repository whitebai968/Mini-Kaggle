<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dataset Query Page</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <div class="logo" title="Group 06">Dataset House</div>
        <nav>
            <a href="{{ url_for('dataset.dashboard') }}">datasets</a>
            <a href="{{ url_for('auth.logout') }}">logout</a>
        </nav>
    </header>

    <h2>Dataset Query</h2>

    <form method="POST" action="{{ url_for('query.sql_query') }}">
        <div class="form-group">
            <label>Select Statement</label>
            <label>
                <textarea name="sql_query" required>{{ request.form.get('sql_query', '') }}</textarea>
            </label>
        </div>
        <div class="form-group-radio">
            <input type="radio" name="format" value="json" id="fmt-json" checked>
            <label for="fmt-json">JSON</label>

            <input type="radio" name="format" value="csv" id="fmt-csv">
            <label for="fmt-csv">CSV</label>
        </div>
        <div class="actions">
            <button type="submit" class="action-btn">execute</button>
        </div>
    </form>

    {% include 'messages.html' %}

    {% if query_result %}
    <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
        <h3>Result:</h3>
        <pre style="background: #f8f9fa; padding: 15px; border: 1px solid #ddd; overflow-x: auto;">{{ query_result }}</pre>
    </div>
    {% endif %}

</body>
</html>